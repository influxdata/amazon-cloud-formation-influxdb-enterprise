"DataNodeEni<node-index>": {
    "Type": "AWS::EC2::NetworkInterface",
    "Properties": {
        "Description": "ENI for data node one ASG",
        "GroupSet": [
            {
                "Ref": "InfluxDBInternalSecurityGroup"
            }
        ],
        "SubnetId": {
            "Ref": "Subnet<subnet-index>"
        }
    }
},
"DataNodeDns<node-index>": {
    "Type": "AWS::Route53::RecordSet",
    "Properties": {
        "ResourceRecords": [
            {
                "Fn::GetAtt": [
                    "DataNodeEni<node-index>",
                    "PrimaryPrivateIpAddress"
                ]
            }
        ],
        "HostedZoneId": {
            "Ref": "InfluxDBPrivateHostedZone"
        },
        "Name": "data-<node-index>.influxdb.internal",
        "Type": "A",
        "TTL": "60"
    }
},
"DataNodeVolume<node-index>": {
    "Type": "AWS::EC2::Volume",
    "Properties": {
        "AvailabilityZone": {
            "Fn::GetAtt": [
                "Subnet<subnet-index>",
                "AvailabilityZone"
            ]
        },
        "Size": {
            "Ref": "DataNodeDiskSize"
        },
        "VolumeType": "io1",
        "Iops": {
            "Ref": "DataNodeDiskIops"
        },
        "AutoEnableIO": true,
        "Encrypted": true
    },
    "DeletionPolicy": "Snapshot"
},
"DataNodeAutoScalingGroup<node-index>": {
    "Type": "AWS::AutoScaling::AutoScalingGroup",
    "Properties": {
        "VPCZoneIdentifier": [
            {
                "Ref": "Subnet<subnet-index>"
            }
        ],
        "LaunchConfigurationName": {
            "Ref": "DataNodeLaunchConfiguration"
        },
        "DesiredCapacity": "1",
        "MinSize": "0",
        "MaxSize": "1",
        "TargetGroupARNs": [
            {
                "Ref": "InfluxDBLoadBalancerTargetGroup"
            }
        ],
        "Tags": [
            {
                "Key": "influxdb-eni",
                "Value": {
                    "Ref": "DataNodeEni<node-index>"
                },
                "PropagateAtLaunch": true
            },
            {
                "Key": "influxdb-volume",
                "Value": {
                    "Ref": "DataNodeVolume<node-index>"
                },
                "PropagateAtLaunch": true
            },
            {
                "Key": "influxdb-hostname",
                "Value": {
                    "Ref": "DataNodeDns<node-index>"
                },
                "PropagateAtLaunch": true
            },
            {
                "Key": "Name",
                "Value": "data-<node-index>",
                "PropagateAtLaunch": true
            }
        ]
    },
    "CreationPolicy": {
        "ResourceSignal": {
            "Count": "1",
            "Timeout": "PT60M"
        }
    },
    "UpdatePolicy": {
        "AutoScalingRollingUpdate": {
            "MinInstancesInService": 0,
            "MaxBatchSize": 1,
            "PauseTime": "PT10M",
            "WaitOnResourceSignals": true
        }
    }
},